# SafeTrix - 安全文件传输系统

SafeTrix 是一个基于 C 语言 (C11) 开发的轻量级、控制台版文件传输工具。它专注于提供稳定、可视化的文件传输体验，并具备断点续传和流式加密功能，适用于需要可靠文件移动的场景。

## 核心功能 (Features)

* **🛡️ 安全传输**: 采用 XOR 流式加密算法，在传输过程中对文件内容进行实时混淆。
* **⏯️ 断点续传**: 自动记录任务进度，程序意外中断或重启后可从断点处继续传输，无需重头开始。
* **📊 可视化进度**: 提供基于控制台的文本进度条，实时显示传输百分比。
* **📝 任务队列管理**: 支持添加多个传输任务，并持久化保存任务列表到本地数据库 (`data/safetrix.db`)。
* **Logs 日志系统**: 内置分级日志记录 (`[INFO]`, `[WARN]`, `[ERR]`)，方便排查问题。
* **交互式 CLI**: 简单易用的命令行菜单界面，支持路径空格输入。

## 项目结构 (Project Structure)

    SafeTrix/
    ├── CMakeLists.txt          # CMake 构建配置文件
    ├── src/                    # 源代码目录
    │   ├── main.c              # 程序入口
    │   ├── core/               # 核心逻辑 (任务管理, 传输引擎, 安全加密)
    │   ├── data/               # 数据层 (日志, 持久化存储)
    │   ├── ui/                 # 界面层 (主窗口, 进度条)
    │   └── utils/              # 工具库 (文件操作, 算法, CRC32)
    ├── include/                # 头文件目录
    │   ├── common/             # 通用类型定义 (AppTypes, ErrorCode)
    │   └── ... (对应 src 的头文件)
    └── data/                   # 运行时数据 (日志文件, 数据库)

## 快速开始 (Getting Started)

### 前置要求

* C 编译器 (GCC, MSVC, Clang 等)
* CMake 3.20 或更高版本

### 构建步骤 (Build)

1. 克隆或下载本项目。
2. 在项目根目录下创建一个构建目录：

        mkdir build
        cd build

3. 运行 CMake 配置：

        cmake ..

4. 编译项目：
    * **Linux/Mac**: `make`
    * **Windows**: `cmake --build .`

编译完成后，可执行文件 `SafeTrix` 将生成在 `build/bin/` 目录下。

### 运行 (Run)

直接运行生成的可执行文件：

    ./bin/SafeTrix

*(注意：Windows 用户建议在支持 UTF-8 的终端（如新版 PowerShell 或 Windows Terminal）中运行，以获得最佳的中文显示效果)*

## 使用指南 (Usage)

启动程序后，你将看到如下主菜单：

    ========================================
           SafeTrix 任务管理控制台
    ========================================
     1. 创建测试文件 (10MB)
     2. 添加新任务
     3. 查看任务列表
     4. 运行任务 (阻塞执行)
     0. 退出
    ========================================

1. **创建测试文件**: 在当前目录生成一个 `test_source.dat` (10MB)，用于快速测试传输功能。
2. **添加新任务**:
    * 输入 **源文件路径** (支持绝对/相对路径)。
    * 输入 **目标文件路径** (注意：必须包含文件名，例如 `D:\Backups\data.bak`)。
3. **查看任务列表**: 显示当前所有任务的 ID、状态 (等待/运行/完成) 和进度。
4. **运行任务**: 输入任务 ID 开始传输。传输过程中会显示进度条。
    * *注：当前版本为阻塞式执行，传输期间无法进行其他操作。*

## 注意事项

* **路径输入**: 在 Windows 上输入路径时，建议使用反斜杠 `\`。如果目标路径是目录，请务必在末尾补全文件名（例如
  `C:\Dest\file.txt`），否则可能会提示创建文件失败。
* **数据文件**: 程序会在 `data/` 目录下生成 `safetrix.db` (任务数据) 和 `app.log` (运行日志)，请勿随意删除，以免丢失任务进度。

## 待办事项 (TODO)

* [ ] 实现多线程异步传输，解决 UI 阻塞问题。
* [ ] 在添加任务时自动检测目标路径是否为目录，并自动拼接文件名。
* [ ] 集成 CRC32 校验，确保传输后文件的完整性。
* [ ] 优化加密模块，支持自定义密钥。

---
*Generated for SafeTrix v1.0*